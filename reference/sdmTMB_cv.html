<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Facilitates cross validation with sdmTMB models. Returns the log likelihood
of left-out data, which is similar in spirit to the ELPD (expected log
pointwise predictive density). The function has an option for
leave-future-out cross validation. By default, the function creates folds
randomly but folds can be manually assigned via the fold_ids argument."><title>Cross validation with sdmTMB models — sdmTMB_cv • sdmTMB</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Cross validation with sdmTMB models — sdmTMB_cv"><meta property="og:description" content="Facilitates cross validation with sdmTMB models. Returns the log likelihood
of left-out data, which is similar in spirit to the ELPD (expected log
pointwise predictive density). The function has an option for
leave-future-out cross validation. By default, the function creates folds
randomly but folds can be manually assigned via the fold_ids argument."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">sdmTMB</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.1.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/model-description.html">sdmTMB model description</a>
    <a class="dropdown-item" href="../articles/web_only/basic-intro.html">Introduction to modelling with sdmTMB</a>
    <a class="dropdown-item" href="../articles/web_only/bayesian.html">Bayesian estimation with sdmTMB</a>
    <a class="dropdown-item" href="../articles/web_only/cross-validation.html">Cross-validation for model evaluation and comparison</a>
    <a class="dropdown-item" href="../articles/web_only/delta-models.html">Fitting delta (hurdle) models with sdmTMB</a>
    <a class="dropdown-item" href="../articles/web_only/ggeffects.html">Visualizing marginal effects in sdmTMB models with ggeffects</a>
    <a class="dropdown-item" href="../articles/web_only/index-standardization.html">Index standardization with sdmTMB</a>
    <a class="dropdown-item" href="../articles/web_only/poisson-link.html">Poisson-link delta models</a>
    <a class="dropdown-item" href="../articles/web_only/pretty-plots.html">Making pretty maps with sdmTMB output</a>
    <a class="dropdown-item" href="../articles/web_only/residual-checking.html">Residual checking with sdmTMB</a>
    <a class="dropdown-item" href="../articles/web_only/spatial-trend-models.html">Fitting spatial trend models with sdmTMB</a>
    <a class="dropdown-item" href="../articles/web_only/threshold-models.html">Threshold modeling with sdmTMB</a>
    <a class="dropdown-item" href="../articles/web_only/visreg.html">Visualizing sdmTMB conditional effects using visreg</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/pbs-assess/sdmTMB/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Cross validation with sdmTMB models</h1>
      <small class="dont-index">Source: <a href="https://github.com/pbs-assess/sdmTMB/blob/HEAD/R/cross-val.R" class="external-link"><code>R/cross-val.R</code></a></small>
      <div class="d-none name"><code>sdmTMB_cv.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Facilitates cross validation with sdmTMB models. Returns the log likelihood
of left-out data, which is similar in spirit to the ELPD (expected log
pointwise predictive density). The function has an option for
leave-future-out cross validation. By default, the function creates folds
randomly but folds can be manually assigned via the <code>fold_ids</code> argument.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sdmTMB_cv</span><span class="op">(</span></span>
<span>  <span class="va">formula</span>,</span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">mesh_args</span>,</span>
<span>  mesh <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  time <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  k_folds <span class="op">=</span> <span class="fl">8</span>,</span>
<span>  fold_ids <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  lfo <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  lfo_forecast <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  lfo_validations <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  parallel <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  use_initial_fit <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  spde <span class="op">=</span> <span class="fu">deprecated</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>formula</dt>
<dd><p>Model formula.</p></dd>


<dt>data</dt>
<dd><p>A data frame.</p></dd>


<dt>mesh_args</dt>
<dd><p>Arguments for <code><a href="make_mesh.html">make_mesh()</a></code>. If supplied, the mesh will be
reconstructed for each fold.</p></dd>


<dt>mesh</dt>
<dd><p>Output from <code><a href="make_mesh.html">make_mesh()</a></code>. If supplied, the mesh will be constant
across folds.</p></dd>


<dt>time</dt>
<dd><p>The name of the time column. Leave as <code>NULL</code> if this is only
spatial data.</p></dd>


<dt>k_folds</dt>
<dd><p>Number of folds.</p></dd>


<dt>fold_ids</dt>
<dd><p>Optional vector containing user fold IDs. Can also be a
single string, e.g. <code>"fold_id"</code> representing the name of the variable in
<code>data</code>. Ignored if <code>lfo</code> is TRUE</p></dd>


<dt>lfo</dt>
<dd><p>Whether to implement leave-future-out (LFO) cross validation where
data are used to predict future folds. <code>time</code> argument in <code><a href="sdmTMB.html">sdmTMB()</a></code> must
be specified. See Details section below.</p></dd>


<dt>lfo_forecast</dt>
<dd><p>If <code>lfo = TRUE</code>, number of time steps to forecast. Time
steps 1, ..., T are used to predict T + <code>lfo_forecast</code> and the last
forecasted time step is used for validation. See Details section below.</p></dd>


<dt>lfo_validations</dt>
<dd><p>If <code>lfo = TRUE</code>, number of times to step through the
LFOCV process. Defaults to 5. See Details section below.</p></dd>


<dt>parallel</dt>
<dd><p>If <code>TRUE</code> and a <code><a href="https://future.futureverse.org/reference/plan.html" class="external-link">future::plan()</a></code> is supplied, will be run in
parallel.</p></dd>


<dt>use_initial_fit</dt>
<dd><p>Fit the first fold and use those parameter values
as starting values for subsequent folds? Can be faster with many folds.</p></dd>


<dt>spde</dt>
<dd><p><strong>Depreciated.</strong> Use <code>mesh</code> instead.</p></dd>


<dt>...</dt>
<dd><p>All other arguments required to run <code><a href="sdmTMB.html">sdmTMB()</a></code> model with the
exception of <code>weights</code>, which are used to define the folds.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A list:</p><ul><li><p><code>data</code>: Original data plus columns for fold ID, CV predicted value,
and CV log likelihood.</p></li>
<li><p><code>models</code>: A list of models; one per fold.</p></li>
<li><p><code>fold_loglik</code>: Sum of left-out log likelihoods per fold.</p></li>
<li><p><code>sum_loglik</code>: Sum of <code>fold_loglik</code> across all left-out data.</p></li>
<li><p><code>pdHess</code>: Logical vector: Hessian was invertible each fold?</p></li>
<li><p><code>converged</code>: Logical: all <code>pdHess</code> <code>TRUE</code>?</p></li>
<li><p><code>max_gradients</code>: Max gradient per fold.</p></li>
</ul><p>Prior to <span class="pkg">sdmTMB</span> version '0.3.0.9002', <code>elpd</code> was incorrectly returned as
the log average likelihood, which is another metric you could compare models
with, but not ELPD. For maximum likelihood, <a href="https://github.com/pbs-assess/sdmTMB/issues/235" class="external-link">ELPD is equivalent in spirit to the sum of the log likelihoods</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><strong>Parallel processing</strong></p>
<p>Parallel processing can be used by setting a <code><a href="https://future.futureverse.org/reference/plan.html" class="external-link">future::plan()</a></code>.</p>
<p>For example:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(future)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plan</span>(multisession)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># now use sdmTMB_cv() ...</span></span></code></pre><p></p></div>
<p><strong>Leave-future-out cross validation (LFOCV)</strong></p>
<p>An example of LFOCV with 9 time steps, <code>lfo_forecast = 1</code>, and
<code>lfo_validations = 2</code>:</p><ul><li><p>Fit data to time steps 1 to 7, predict and validate step 8.</p></li>
<li><p>Fit data to time steps 1 to 8, predict and validate step 9.</p></li>
</ul><p>An example of LFOCV with 9 time steps, <code>lfo_forecast = 2</code>, and
<code>lfo_validations = 3</code>:</p><ul><li><p>Fit data to time steps 1 to 5, predict and validate step 7.</p></li>
<li><p>Fit data to time steps 1 to 6, predict and validate step 8.</p></li>
<li><p>Fit data to time steps 1 to 7, predict and validate step 9.</p></li>
</ul><p>See example below.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">mesh</span> <span class="op">&lt;-</span> <span class="fu"><a href="make_mesh.html">make_mesh</a></span><span class="op">(</span><span class="va">pcod</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"X"</span>, <span class="st">"Y"</span><span class="op">)</span>, cutoff <span class="op">=</span> <span class="fl">25</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Set parallel processing first if desired with the future package.</span></span></span>
<span class="r-in"><span><span class="co"># See the Details section above.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">m_cv</span> <span class="op">&lt;-</span> <span class="fu">sdmTMB_cv</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">density</span> <span class="op">~</span> <span class="fl">0</span> <span class="op">+</span> <span class="va">depth_scaled</span> <span class="op">+</span> <span class="va">depth_scaled2</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">pcod</span>, mesh <span class="op">=</span> <span class="va">mesh</span>,</span></span>
<span class="r-in"><span>  family <span class="op">=</span> <span class="fu"><a href="families.html">tweedie</a></span><span class="op">(</span>link <span class="op">=</span> <span class="st">"log"</span><span class="op">)</span>, k_folds <span class="op">=</span> <span class="fl">2</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Running fits with `future.apply()`.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Set a parallel `future::plan()` to use parallel processing.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">m_cv</span><span class="op">$</span><span class="va">fold_loglik</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] -3387.398 -3329.670</span>
<span class="r-in"><span><span class="va">m_cv</span><span class="op">$</span><span class="va">sum_loglik</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] -6717.068</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">m_cv</span><span class="op">$</span><span class="va">data</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 × 15</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    year     X     Y depth density present   lat   lon depth_mean depth_sd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>  <span style="text-decoration: underline;">2</span>003  446. <span style="text-decoration: underline;">5</span>793.   201   113.        1  52.3 -<span style="color: #BB0000;">130.</span>       5.16    0.445</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>  <span style="text-decoration: underline;">2</span>003  446. <span style="text-decoration: underline;">5</span>800.   212    41.7       1  52.3 -<span style="color: #BB0000;">130.</span>       5.16    0.445</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>  <span style="text-decoration: underline;">2</span>003  449. <span style="text-decoration: underline;">5</span>802.   220     0         0  52.4 -<span style="color: #BB0000;">130.</span>       5.16    0.445</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span>  <span style="text-decoration: underline;">2</span>003  437. <span style="text-decoration: underline;">5</span>802.   197    15.7       1  52.4 -<span style="color: #BB0000;">130.</span>       5.16    0.445</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span>  <span style="text-decoration: underline;">2</span>003  421. <span style="text-decoration: underline;">5</span>771.   256     0         0  52.1 -<span style="color: #BB0000;">130.</span>       5.16    0.445</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span>  <span style="text-decoration: underline;">2</span>003  418. <span style="text-decoration: underline;">5</span>772.   293     0         0  52.1 -<span style="color: #BB0000;">130.</span>       5.16    0.445</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 5 more variables: depth_scaled &lt;dbl&gt;, depth_scaled2 &lt;dbl&gt;, cv_fold &lt;int&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   cv_predicted &lt;dbl&gt;, cv_loglik &lt;dbl&gt;</span></span>
<span class="r-in"><span><span class="va">m_cv</span><span class="op">$</span><span class="va">models</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Spatial model fit by ML ['sdmTMB']</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Formula: density ~ 0 + depth_scaled + depth_scaled2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Family: tweedie(link = 'log')</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               coef.est coef.se</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> depth_scaled     -2.06    0.19</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> depth_scaled2    -1.27    0.10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dispersion parameter: 13.10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Tweedie p: 1.60</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Matérn range: 96.42</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Spatial SD: 2.78</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ML criterion at convergence: 3206.009</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> See ?tidy.sdmTMB to extract these values as a data frame.</span>
<span class="r-in"><span><span class="va">m_cv</span><span class="op">$</span><span class="va">max_gradients</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.814629e-10 3.766876e-12</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># Create mesh each fold:</span></span></span>
<span class="r-in"><span><span class="va">m_cv2</span> <span class="op">&lt;-</span> <span class="fu">sdmTMB_cv</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">density</span> <span class="op">~</span> <span class="fl">0</span> <span class="op">+</span> <span class="va">depth_scaled</span> <span class="op">+</span> <span class="va">depth_scaled2</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">pcod</span>, mesh_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>xy_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"X"</span>, <span class="st">"Y"</span><span class="op">)</span>, cutoff <span class="op">=</span> <span class="fl">20</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  family <span class="op">=</span> <span class="fu"><a href="families.html">tweedie</a></span><span class="op">(</span>link <span class="op">=</span> <span class="st">"log"</span><span class="op">)</span>, k_folds <span class="op">=</span> <span class="fl">2</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Running fits with `future.apply()`.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Set a parallel `future::plan()` to use parallel processing.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use fold_ids:</span></span></span>
<span class="r-in"><span><span class="va">m_cv3</span> <span class="op">&lt;-</span> <span class="fu">sdmTMB_cv</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">density</span> <span class="op">~</span> <span class="fl">0</span> <span class="op">+</span> <span class="va">depth_scaled</span> <span class="op">+</span> <span class="va">depth_scaled2</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">pcod</span>, mesh <span class="op">=</span> <span class="va">mesh</span>,</span></span>
<span class="r-in"><span>  family <span class="op">=</span> <span class="fu"><a href="families.html">tweedie</a></span><span class="op">(</span>link <span class="op">=</span> <span class="st">"log"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  fold_ids <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">pcod</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">pcod</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Running fits with `future.apply()`.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Set a parallel `future::plan()` to use parallel processing.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># LFOCV:</span></span></span>
<span class="r-in"><span><span class="va">m_lfocv</span> <span class="op">&lt;-</span> <span class="fu">sdmTMB_cv</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">present</span> <span class="op">~</span> <span class="fu">s</span><span class="op">(</span><span class="va">year</span>, k <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">pcod</span>,</span></span>
<span class="r-in"><span>  mesh <span class="op">=</span> <span class="va">mesh</span>,</span></span>
<span class="r-in"><span>  lfo <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  lfo_forecast <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  lfo_validations <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">binomial</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  spatiotemporal <span class="op">=</span> <span class="st">"off"</span>,</span></span>
<span class="r-in"><span>  time <span class="op">=</span> <span class="st">"year"</span> <span class="co"># must be specified</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Running fits with `future.apply()`.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Set a parallel `future::plan()` to use parallel processing.</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in `$&lt;-`(`*tmp*`, "cv_loglik", value = c(-2.02746386984122, -0.0210808278056854, -0.0194247223135656, -0.654376030893952, -0.186469931076194, -0.160293756625295, -0.184425509056766, -0.288904966608918, -0.462347679536239, -0.136526965713469, -0.0388369888284061, -0.0392128267920943, -0.145187751135299, -0.129559949589773, -0.0498161725622976, -0.127833360684464, -0.0641453494918176, -0.38632091307144, -0.0633285325298065, -0.210375467428894, -0.139624378782622, -0.128146540558062, -0.0886726280424189, -0.16655034194463, -0.253857240288005, -0.470011319686038, -0.131472487936777, -0.172277338134122, -0.122708953140234, -0.180498466788064, -0.135687252821284, -0.134882026970111, -0.131188823887718, -0.204060650867324, -0.138614269707553, -0.12703154732217, -0.139804030886379, -0.138822423676154, -1.50872989683004, -1.52380867497137, -0.205635380888445, -0.27766024261502, -1.0982568254722, -1.14853015468333, -1.50499407535189, -0.35896277884301, -0.478815874450541, -0.43701004726933, -1.87259598537264, -1.18180257242234, -0.341869437425543, -1.16125379432639, -0.493240488354204, -1.07790254765484, -0.365292101546764, -0.295138766509473, -1.72737101192525, -0.270188512411276, -0.354322898252988, -0.386892967217584, -0.258988041328883, -0.312257500535507, -0.66568039749982, -0.348874752071053, -0.876172087441537, -1.23011088701971, -0.456247749676015, -0.424851556944427, -0.354707189218613, -1.2990476892007, -0.424566494048867, -0.886858084090395, -0.512968583912381, -0.141681128257987, -0.486526258598948, -0.230305861914929, -0.332427564701329, -0.553802982371616, -0.177220591211219, -0.343693593090236, -0.189159876180436, -1.22137545981111, -0.274258611812486, -0.230189162567603, -0.449038606104765, -1.36907982804334, -1.0746486425962, -0.261200300084763, -0.371076566514475, -0.531672329583951, -0.918466597915788, -0.296744243885234, -0.495204954562653, -0.85772115806451, -0.0701763516468207, -0.382654914428199, -0.450003753901588, -0.391178248797192, -0.327652813034148, -0.313881317869913, -0.780647039672451, -0.450145730903358, -0.311441198558009, -0.326017344086171, -0.777865312068399, -0.447940605601764, -0.460198795262321, -0.559924971630314, -0.368350007255304, -0.0692528018410852, -0.566774229363413, -0.835071100637981, -0.721538957962947, -0.747416311593719, -0.0535264686477745, -0.850212647640005, -0.6800239548953, -0.620949059658084, -0.739753521811033, -0.331608377574192, -0.216097376647889, -0.14808051097282, -0.383943546522798, -0.234668807665498, -0.735203423041187, -0.433442369075562, -0.540583315758805, -0.147350860733084, -0.21388990368825, -0.676905607209952, -0.691760909273273, -1.11668839159876, -0.262795492579218, -0.30264190393593, -0.911313420755561, -1.501600718842, -0.82455584117936, -0.3609869454217, -0.34490488102561, -0.335754705803355, -1.14379881980157, -1.84514402421751, -0.397962134537398, -0.72866619204392, -0.589921103513308, -0.0835598735160046, -0.493327153424561, -0.699724344319675, -0.51079970818733, -1.02736569640533, -0.395629318507743, -1.01721127256485, -0.0975433587050577, -0.248897695094199, -0.970094813164089, -0.516529078174891, -0.711345853122971, -0.723976489716579, -0.107370580020199, -0.760084961877303, -0.61129029007434, -0.643761129687219, -0.499649268633622, -0.401892330537257, -0.460257838985017, -0.417931886928083, -0.788983085088617, -1.16442939133343, -0.830669545303261, -1.04697954174829, -0.51707579936778, -0.505350332385569, -0.332575249607053, -1.09475167933305, -0.387666807683186, -0.546707139382988, -0.366461836912135, -0.31276601239504, -0.501376684460981, -0.393252109627387, -0.313035569972953, -0.46834958887217, -1.01376462552026, -0.81821799023378, -0.756684884333565, -0.55568840263924, -0.864266089502004, -1.29296976808479, -0.865995908560953, -0.814848388006605, -0.364710028126006, -0.321210869793376, -1.30410479642471, -0.512932889559468, -0.906825273374066, -0.660518284925271, -1.47443645562358, -1.49725408712665, -0.0141539872837447, -0.335526047851445, -0.276412700743238, -0.342369762406904, -0.343750611340301, -0.650714046380343, -0.9639823731996, -0.446576504410217, -0.689902363129501, -0.964564225789496, -1.46370034581337, -0.233401537715228, -1.32382343920976, -1.29250336988338, -0.28508265109061, -0.202723561606878, -0.270402589640459, -0.348971378792232, -0.836355765337622, -0.737284371041327, -0.219330730654805, -0.284173025965476, -0.581684030940536, -0.725169502804147, -0.295454440879334, -0.312911458578664, -0.316589243093641, -0.71233349891623, -0.156608314326728, -0.189250199062039, -0.716255730882767, -0.675115831969706, -0.43163573257971, -0.0665087613260962, -0.6855023203728, -0.747839750430021, -0.817734698765452, -0.0144469388226906, -0.691027305993853, -1.05426974446136, -0.0408676097738921, -0.6064215218469, -0.540966788470086, -0.33636231733028, -0.511901660118418, -0.625116419748031, -0.540278524135679, -0.0474486227113307, -0.0606022759097452, -0.826012916172515, -0.856280196270151, -0.746897422703954, -0.54088219023659, -1.13413768205819, -0.789083516522628, -0.435897721714466, -1.08701579839249, -0.335664328833031, -0.832564572091641, -0.495494370241458, -1.91709455685409, -0.3778593625434, -1.5508493858332, -0.862730573855182, -2.08669155801363, -0.374133130899019, -0.898958313396302, -0.576946127242248, -2.10511841164603, -0.360383179814375, -1.66064361454579, -0.132849768886137, -0.568413584896608, -0.522514402205592, -1.96521601110797, -0.644819844102465, -0.502649779851374, -0.532231472823847, -0.628255756334934, -0.306137060112826, -0.491637981298255, -0.615129839284368, -0.386694235949446, -0.424190553426758, -0.507815260946851, -0.332897551351978, -0.341444109848215, -0.711771138434798, -0.581740976827297, -0.348945312906147, -0.592724191301079, -0.61028767900447, -0.65633972269485, -0.578395157363392, -0.357461925066345, -0.917813824716954, -0.731536078654597, -1.88240658876363, -0.471518317187486, -0.516060815191881, -0.542364763827798, -0.783319857637537, -0.506439062087259, -0.369417487617821, -0.457584988468205, -0.157769928498387, -0.0135434346004301, -0.600617158375387, -0.924931892086398, -0.043671382438918, -0.0389143536966798, -0.0318738793343303, -0.451297784881396, -0.944222014219951, -0.675621446783367, -0.457265921320889, -0.737931389990278, -0.0499518225538428, -2.67935557630495, -0.203072559936337, -1.00072956692423, -0.11007083727152, -0.554407184132764, -0.198955953366161, -0.492987862502718, -0.046398096362866, -1.66734980435737, -0.671985904570821, -0.912000714457273, -0.993415480310455, -0.790999397636132, -0.774838306620239, -0.816476930598817, -0.0741785405104602, -0.0780354560235189, -0.97597845734382, -0.705719556780123, -1.00856476142791, -1.01559708008183, -0.641580347821677, -0.837360640155536, -0.852638608666632, -0.778124046692318, -0.730685049428018, -1.65071171813038, -2.11027218849724, -1.63995487373857, -1.66309066507803, -1.40824347288637, -0.249006980596007, -2.06611262720596, -1.73635799066161, -1.095388804056, -0.249681066217256, -1.49195187144258, -1.45234448037155, -1.21210936058386, -1.26572106987627, -1.17106417241784, -0.256553303989612, -1.26987149945506, -0.586010207061025, -0.454855739798438, -1.44133984373393, -0.562524125217907, -0.325519080817789, -0.919452787652565, -0.240279253635033, -0.803753091291231, -0.533814451896764, -0.142822727950171, -0.489832583719332, -0.850646165871211, -0.69891681094181, -0.481902664978307, -1.39079907096019, -0.12552286621487, -1.04909794047082, -0.650110874317398, -0.604151111624174, -0.628779822815407, -2.187737254498, -1.08987942727409, -1.01753009439427, -0.129458859607242, -0.119894780733636, -0.135470428072108, -0.0209980328892164, -0.60486001088813, -0.129716206303032, -0.0407686490363755, -0.0308763715826228, -1.14796172258865, -0.102132671859111, -0.32915287761003, -0.779536130238645, -1.13331940746423, -0.285293151910577, -0.744840824752267, -0.975842918403474, -0.41569690778859, -0.35238167539561, -1.18446300173913, -0.270787122409419, -0.333668212210196, -1.27594753346229, -0.30169974652171, -0.318211332907604, -0.753289305425591, -1.17271190137427, -0.350097566188449, -0.381317226234248, -1.07778402853343, -1.13025353716137, -0.2716325680827, -0.579295175473076, -0.902483491053664, -0.778179998271077, -0.343315391836242, -0.577945642268362, -0.422562535789771, -0.362236088881239, -0.935668094000941, -0.830406458495993, -0.117102866103908, -0.115320292034887, -0.0489711159901615, -0.0523829834626857, -0.124674548797523, -0.11675563334606, -2.28251178892314, -0.0849539545450664, -0.146723458931182, -1.41480926003, -0.123875342152845, -0.11683581208156, -0.113124518748941, -0.112279836691062, -0.0885485430626435, -0.202275671062121, -2.04783596127118, -0.115670663278643, -0.204502171117608, -0.119467283648928, -2.06790536165918, -0.120774956588008, -1.18597636829051, -0.239972312642676, -0.136676559380583, -2.14167296163357, -2.14758190329643, -1.35504851295906, -0.322854423872041, -0.336310082200131, -0.427220475754099, -0.254649706036903, -0.908619975270839, -0.459300679058829, -0.265115320933959, -0.410547532060642, -0.418743292278772, -1.1046224049883, -0.744609789680058, -0.337751039632347, -0.200435854725368, -0.98934728660073, -0.138925963581719, -0.270963277156544, -0.24303406655536, -0.167811040028998, -0.326727837559909, -1.75475832830619, -1.33690628208185, -0.269499211134265, -1.11082532626229, -0.217376555280253, -1.03946991087821, -0.324350682818778, -0.911568229768465, -0.970320415583614, -0.164840076639686, -0.174846146132299, -0.921060524530772, -0.27167048042948, -0.717878944543275, -0.980224477684239, -0.160116004899798, -0.14853278716135, -0.200669683293511, -0.599271498201421, -0.721058536750112, -0.261664778005641, -0.144220302657008, -1.33021004609038, -0.232226412802332, -0.288407077725693, -0.285908782397608, -0.293597327321738, -0.306801783278273, -1.05721456284721, -0.868551296252402, -0.970652476332798, -0.352139914707361, -0.652041936769138, -0.828245689168931, -0.743150782626562, -0.528187046800274, -0.517837283601577, -0.620197086596817, -0.789778283344553, -0.860507441716656, -0.388280922883305, -0.485064083166269, -1.92511680879896, -0.308181077207623, -1.37363681577267, -1.05883043921161, -0.232930782073366, -0.51454297324177, -0.271805233306591, -0.498545110265484, -0.248346792439086, -0.288463549000534, -0.275907888725858, -1.45746350970087, -1.10005481096063, -1.03551495118554, -1.10302056292808, -0.877400231765834, -0.98174270933119, -1.02776660109409, -1.01380258619181, -1.08965303457537, -0.970585305378171, -1.07310979852935, -0.419233906435207, -0.808163876809986, -0.383128195582625, -0.428576031237881, -1.30288004558945, -1.32855137399406, -0.176405874473429, -0.145217417266501, -1.7614565089253, -1.25190212532121, -1.5165842002644, -0.54869176055151, -0.55028107795757, -0.989357905930147, -1.8463064077707, -0.225247701932783, -1.25512013631298, -0.1432151800316, -2.20768191713792, -0.11651267708946, -2.05806997965455, -0.139515776426705, -0.138743651690526, -0.830150912677971, -0.317149778463938, -0.365488003793483, -1.03023213972115, -0.922680078323602, -0.559712640721034, -1.23699111643818, -0.685698204057212, -0.362013298550596, -0.743624047875826, -0.214302035320139, -0.247474060663116, -0.418756580190479, -0.342140566899014, -1.93008336956636, -0.372002201727196, -0.325492429604509, -0.74142700480951, -0.170718809861082, -0.189023769143446, -0.263221459150643, -0.299928695116752, -0.197043387743891, -0.286954687313047, -0.559297720577648, -0.56620300861148, -0.473103377190434, -0.419670989664932, -1.2081539081694, -0.501037179427215, -0.742751195736469, -0.74385952741069, -1.02854230322426, -0.618467721556494, -0.444097234851098, -0.671555314503063, -0.604757252671486, -0.536309179572631, -0.554840255459704, -0.413892370005076, -0.507408675595393, -0.780298115019872, -0.571043515645273, -0.356825252911283, -0.59648469428004, -0.55709610344455, -0.982835498364805, -0.61293206035068, -0.223152134969819, -0.425985777764284, -1.12221574077646, -0.99308438709617, -0.604442738417047, -1.0435890669767, -0.825858252632325, -2.54643078533148, -0.206596141169454, -0.189497912654063, -0.216400413806507, -0.221188105808263, -1.54229559647394, -1.48893928450996, -0.171501638149889, -0.200361468798417, -0.328133313488566, -0.18286827628761, -0.156033864255076, -0.514158046857966, -0.303071783513456, -1.69595942302341, -0.851453398524019, -0.139477525516364, -0.667277038664246, -0.553441469253354, -0.336652816540475, -0.574926177207425, -0.386449937310663, -0.292138249238769, -0.392747180303098, -0.497816341653741, -0.552613370266858, -0.962963590302814, -0.476851475505939, -0.837700475599641, -0.417169637123321, -1.23018990362623, -1.37589901253545, -0.0940274671407273, -0.0456964339211875, -0.0535077135115786, -0.0391898473211073, -0.151476869318199, -1.80361284324942, -1.73356428670044, -0.501909031065507, -0.506271651997078, -1.13667785336578, -0.362782810874305, -2.3653225943617, -0.108994543583343, -0.0988655080122312, -0.095612209906047, -0.326163660760423, -0.101806624034268, -0.120311660076974, -0.128066259871982, -0.104306404013057, -0.103591723812979, -0.313323950450515, -1.33649919464982, -0.310433261903674, -0.276134667008682, -0.279867292675001, -1.22740947669176, -1.31000876918254, -1.13796330232954, -1.1175236313737, -0.307816279675685, -1.02985879625452, -1.2205070689273, -1.7246719039308, -1.41982403640602, -0.236195649777051, -0.245341178219778, -0.119511097330883, -1.75801495263566, -0.323937999829099, -0.323724550556627, -1.2811114624065, -0.332074897089912, -1.29239133775952, -0.35718849619736, -1.23027468789648, -0.278013079771214, -1.67966009945865, -0.110443586455918, -0.0703105051209401, -0.090300711336138, -2.80042996930487, -1.54318722815424, -0.0313771248526779, -0.0403993663339756, -0.100449763536414, -2.26208469111602, -0.102324255654814, -0.105291475209069, -0.104178714988315, -0.101728903061696, -0.154310477954172, -1.85876784148715, -2.26687720851406, -0.069022869057055, -0.0538307675358534, -2.2535504020717, -0.0377448432251322, -0.0395479301581723, -0.697338896725554, -0.60314843171673, -0.0109903448951256, -0.482177984602707, -0.976730680524345, -0.621822388961174, -0.54904044818875, -1.01432474738098, -0.562835220778814, -0.623873971719723, -0.374120406204227, -0.380394150631095, -0.443922179867024, -0.910826764348674, -0.576898056655915, -0.815656650441066, -0.793596767421467, -2.40545547942678, -0.0912486722292297, -0.0905846583850668, -2.38874910307521, -2.36152724358745, -0.100068175302492, -0.308584286554943, -0.471069363098436, -0.0876852655441925, -0.0861021847968685, -0.091346454908232, -1.80960120468404, -0.129932841063777, -0.147297767066986, -1.79387372624433, -0.146374173409643, -0.16557300371845, -0.0623035640733731, -0.0329757933717403, -0.0271192459991908, -0.050511343135818, -0.0380094086488358, -0.02016792801863, -0.0167602829992882, -0.356724116170895, -0.373199127151914, -0.407332408534965, -0.361774266521745, -0.556993642580289, -0.434870806373797, -0.446188382154066, -0.511138519079504, -0.90614699709047, -0.443534332805147, -0.393725764492475, -0.500345866347115, -1.27382982736301, -0.437010759397209, -0.0944485263892344, -2.51663143016485, -0.2300271262932, -0.0732673121057124, -0.99563387762085, -0.0923493860247678, -0.0934798868507354, -0.0934118668176918, -0.0925547760580282, -0.0916552229442398, -0.09570956781235, -0.0935849062219919, -0.450035251452114, -1.80501920763699, -0.239009223278877, -0.344998817162337, -0.274865072771781, -0.0493070132788324, -0.151280727476781, -0.081072048643175, -0.101688449303847, -0.186233854087964, -0.106600962033146, -0.117813719727161, -0.109157764099681, -0.107934210161474, -0.101174850400683, -0.105081026784013, -0.135221980224846, -0.143217744130366, -0.19244495384906, -1.87511578215266, -0.267802802544531, -1.4718084466354, -0.172165255068578, -0.236824199489125, -0.200075615155018, -0.181697795023497, -0.0304845629088471, -0.0233169988615789, -0.0479280354223486, -0.0439352676463571, -0.238194251228762, -0.216904019310943, -1.63350641863692, -0.179816189558324, -1.14232007750697, -0.476062503464916, -1.09032307298683, -0.540602818256716, -0.653919832420956, -0.00926931739115393, -0.0455046249404154, -0.0372995445784106, -0.0509434371314047, -0.0263742827718311, -0.0531799145198218, -0.278631740439094, -0.397978512858808, -0.720496057708573, -0.583025944596484, -0.75822913975248, -0.565986902335761, -0.405007393763201, -0.496732643400462, -1.06112840714182, -0.706202512741772, -0.273519787373797, -0.196713728648767, -0.20909769299257, -1.67034512777402, -1.5990335644075, -0.689358415918767, -0.888381571512088, -2.13373705177407, -2.05643477864806, -0.149963759861065, -0.224987268191356, -0.309358822897191, -1.57841235519803, -0.178432264828266, -1.78460399416848, -0.185262783651303, -1.07996123514892, -0.388527962206772, -0.278343328990771, -0.304968433532035, -0.710376983584859, -0.718968974759827, -0.537875755963627, -0.565292241387647, -0.895985132520069, -1.41222510698955, -0.44600214415616, -0.810259733292183, -0.341924524755549, -0.686004623302138, -0.665221064563486, -0.968473914868681, -1.31272547326362, -1.51397525214147, -1.75058331355971, -0.414964447257591, -0.358537204006674, -0.776156329884854, -0.444117191638887, -0.798501385926797, -0.7029374453292, -0.796921480864292, -0.402409114206694, -0.900862027774251, -0.588340435524539, -0.789531521602997, -0.508357640806632, -0.507421857510087, -0.366586059085247, -0.354379313715183, -0.280039215862696, -0.587328607186795, -0.257565393990865, -0.249048879663357, -0.238737217222054, -0.246653676270544, -0.593037208022595, -0.585793097072851, -0.66944245495975, -0.51001382829256, -0.571044761514867, -0.487083279877765, -0.422848531785639, -0.98887167956175, -0.387427480753472, -1.13911124952174, -0.481811800724018, -0.405714207684676, -1.53684322966424, -0.222785688293682, -2.32547243865539, -2.02225574802619, -0.460346496810114, -0.318213861558014, -0.108554140897033, -0.128920710601272, -0.282646957874824, -0.0941675062857041, -1.01919154054275, -0.57519471878873, -0.552452820074291, -0.684009589479391, -0.871580643683983, -0.792332572146514, -0.868722758615511, -1.48241936614853, -0.287400991232541, -1.57555573015299, -0.791270424755258, -0.325111682820867, -0.979980861911425, -0.282836006362321, -1.52239015075615, -1.78980577650398, -0.147731635567093, -0.187515314929229, -0.654295464518419, -0.710935180640164, -0.679670601519959, -0.688350553710087, -0.681994881784768, -0.617443514108832, -0.410311010613249, -1.04180125429909, -0.668142952203459, -1.15480714774549, -0.960364606889002, -0.329386186582209, -1.4647393637433, -1.60331313501879, -1.2191688498421, -0.812046447856029, -0.397623336669109, -0.159088568370117, -0.248710433729853, -0.248275999581608, -0.443334528136245, -0.53167241541393, -0.127974438404023, -0.124155025094343, -0.269306435887312, -0.256356155355865, -0.204569337974377, -0.251823291173572, -0.253645345324604, -0.402634413560447, -1.09280865663114, -0.439217955087741, -1.15020499287952, -0.387835912149163, -0.823085087026578, -0.480560723947801, -0.88331454657564, -1.18016446902248, -1.00833223569533)):</span> Assigned data `cv_loglik[tmb_data$weights_i == 1]` must be compatible</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> with existing data.</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">✖</span> Existing data has 240 rows.</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">✖</span> Assigned data has 969 rows.</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Only vectors of size 1 are recycled.</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">Caused by error in `vectbl_recycle_rhs_rows()`:</span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> Can't recycle input of size 969 to size 240.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># See how the LFOCV folds were assigned:</span></span></span>
<span class="r-in"><span><span class="va">example_data</span> <span class="op">&lt;-</span> <span class="va">m_lfocv</span><span class="op">$</span><span class="va">models</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">data</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(expr, envir, enclos):</span> object 'm_lfocv' not found</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">example_data</span><span class="op">$</span><span class="va">cv_fold</span>, <span class="va">example_data</span><span class="op">$</span><span class="va">year</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(expr, envir, enclos):</span> object 'example_data' not found</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Sean C. Anderson, Eric J. Ward, Lewis A. K. Barnett, Philina A. English.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

